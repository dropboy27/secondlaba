# Лабораторная работа 2
## Тема: Мини-оболочка с файловыми командами

* **Цель:** Реализовать эмулятор shell с поддержкой основных команд управления файлами и каталогами, архивизацией, поиском по содержимому и историей команд
* **Библиотеки:** *os*, *shutil*, *sys*, *pathlib*, *re*, *loguru*
* **Допущения:**
  - Все операции выполняются средствами Python API (без subprocess)
  - Поддерживаются относительные и абсолютные пути
  - Все команды и ошибки логируются в файл shell.log
  - При удалении каталога требуется подтверждение пользователя (y/n)
  - Запрещено удалять корневой каталог (/) или родительский (..)
  - История команд сохраняется в файл .history и загружается при запуске

* **Чему я научился:**
    - Работа с файловой системой (os, pathlib, shutil)
    - Логирование действий пользователя (loguru)
    - Работа с архивами (zipfile, tarfile)
    - Регулярные выражения для поиска
    - Реализация функции undo для отмены операций
    - Разделение логики по отдельным модулям

## Структура проекта

 <pre>
    .
    ├── lab<# лабораторной работы> 
    │   ├── src/                               # Исходный код
    │   ├── tests/                             # Unit тесты
    │   ├── .gitignore                         # git ignore файл
    │   ├──.pre-commit-config.yaml             # Средства автоматизации проверки кодстайла
    │   ├── README.md                          # Описание проекта, с описанием файлов и с титульником
</pre>

### Алгоритм решения
1. Пользователь вводит команду с параметрами (-l, -r, -i если они предусматриваются) или без них​
2. Программа парсит команду на саму команду и аргументы в виде строк через input.split(), например: "ls -l /tmp" становится ["ls", "-l", "/tmp"]
3. По первому значению (названию команды) ищется команда, которая должна выполниться, и вызывается соответствующая функция через switch (или условия if-elif)​
4. Проводится валидация введённой пользователем команды - проверяется количество аргументов, наличие обязательных флагов (-r, -l, -i). В случае недостатка элементов выводится подсказка по использованию командой​
5. Вызывается соответствующая функция модуля с распарсенными аргументами (например, ls(path, flag), rm(file, recursive), grep(pattern, path, recursive, ignore_case))​
6. Внутри функции проводится проверка существования пути через Path(path).exists() и Path(path).is_dir(). Если путь не существует или имеет неправильный тип - выбрасывается пользовательское исключение​
7. Выполняется основная логика команды (копирование файлов через shutil.copy(), вывод содержимого через чтение файла, поиск через регулярные выражения re.findall() и т.д.)
8. Результат логируется через loguru.logger в файл shell.log с форматом: дата/время, уровень (INFO/ERROR/SUCCESS) и сообщение
9. Команда добавляется в историю через add_to_history(user_input) в файл .history для возможности отмены (undo) и просмотра истории
10. Обработка исключений - все ошибки ловятся в try-except блоке, логируются и выводится информативное сообщение пользователю
11. Возврат к шагу 1 - программа возвращается к получению следующей команды от пользователя в бесконечном цикле while True, пока не будет введена команда exit

## Инструкция к использованию

### Установить репозиторий
```git clone https://github.com/dropboy27/secondlaba.git```\
```pip install -r requirements.txt```

### Запустить
```python -m src.main```

### Синтаксис
* Просмотр файлов: ls - список файлов текущей директории; ls -l - подробный список с размерами и датами; ls /path/to/dir - список файлов в указанной директории

* Навигация: cd /path - переход в директорию; cd .. - переход на уровень выше; cd ~ - переход в домашний каталог

* Просмотр содержимого: cat file.txt - вывести содержимое файла в консоль

* Копирование: cp file1.txt file2.txt - копирование файла; cp -r folder1 folder2 - рекурсивное копирование директории (флаг -r)

* Перемещение/переименование: mv old_name.txt new_name.txt - переименование; mv file.txt /path/to/folder - перемещение в другую директорию

* Удаление: rm file.txt - удаление файла (требует подтверждение); rm -r folder_name - рекурсивное удаление директории (требует подтверждение)

* Поиск по шаблону: grep "текст" file.txt - поиск в файле; grep "текст" /path -r - рекурсивный поиск в директории; grep "текст" file.txt -i - поиск без учета регистра (флаг -i)

* Архивизация: zip /path/to/folder archive.zip - создание ZIP архива; unzip archive.zip - распаковка ZIP; tar /path/to/folder archive.tar.gz - создание TAR архива; untar archive.tar.gz - распаковка TAR

* История команд: history - показать все выполненные команды; history 10 - показать последние 10 команд; undo - отменить последнюю команду (cp, mv или rm)

* Справка: help - вывести список всех доступных команд; exit - выход из эмулятора

